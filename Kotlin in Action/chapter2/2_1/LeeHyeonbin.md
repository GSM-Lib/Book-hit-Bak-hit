# 2.1 기본 요소: 함수와 변수
오늘은 코틀린의 함수와 변수에 대해 알아보고, 코틀린이 어떻게 변경 가능한 데이터보다 변경할 수 있는 불변 데이터를 장려하는지 알아보겠습니다.

## 2.1.1 
Kotlin에서 print를 하는 방법은 간단합니다.
```kotlin
fun main(args: Array<String>) {
    println("Hello, world!")
}
```

위 코드를 보고 설명을 하자면 
* kotlin에서는 fun 이라는 키워드로 함수를 선언합니다.
* 파라미터의 이름 뒤에 그 파라미터의 타입을 지정해줍니다. 이 방식은 나중에 변수를 사용할 때에도 동이랗게 사용됩니다.
* 함수를 최상위에 생성할 수 있습니다. 자바와 달리 꼭 클래스 안에 함수를 넣어야 할 필요가 없습니다.
* 프린트를 하기 위해 System.out.println과 같이 번거로운 방식이 아닌 println과 같이 여러 자바의 라이브러리르 편리하게 사용할 수 있도록 도움을 줍니다.
* 세미콜론을 붙이지 않습니다.

간단한 Hello world 코드로 여러 Kotlin의 특징을 확인해보았습니다. 이제는 함수에 대해 조금 더 자세하게 알아보겠습니다.

## 2.1.2
Hello World를 출력하는 예제 함수에서는 return하거나 return type을 지정해주지 않았습니다. 그렇다면 kotlin에서는 리턴을 어떻게 할 수 있을까요?
다른 예제 코드를 들어서 설명하겠습니다.
```kotlin
fun max(a: Int, b: Int): Int {
    return if(a > b) a else b
}
```
위 예제 코드를 보면 Int라는 return type을 변수의 타입을 지정하듯이 :(콜론)을 붙여서 리턴을 지정해주는 것을 알 수 있습니다.

그런데 여기서 조금 재미있는 점이 있습니다.<br>
return에 if로 조건을 걸어 리턴해주는 모습을 볼 수 있습니다.
코틀린의 if는 값을 만들어 낼 수 없는 문장이 아닌 
값을 만드는 식이라는 점입니다.

> 여기서 문과 식을 구분하자면
코틀린에서 if는 문이 아니라 식으로 사용됩니다. 식은 값을 만들어 내며, 다른 하위 요소로 계산에 참여할 수 있습니다. 하지만 문은 자신을 둘러싸고 있는 가장 안쪽 블록에 최상위 요소로 존재해야하며, 아무런 값을 만들어내지 않는다는 차이가 있습니다. 자바에서는 모든 제어 구조가 문으로 되어있지만, 코틀린은 루프를 제외한 대부분의 구조가 식으로 되어있습니다. 이러한 특성은 여러 일반적인 특성을 간결하게 구성할 수 있습니다.

## 식이 본문인 함수
```kotlin
fun max(a: Int, b: Int): Int = if(a > b) a else b
```
조금 전에 살펴본 코드를 return 과 중괄호를 제외하고, 위처럼 식으로 사용할 수 있습니다. 

본문이 중괄호로 둘어싸인 함수를 **블록이 본문인 함수**라고 부르고, 등호와 식으로 이루어진 함수를 **식이 본문인 함수**라고 합니다.

코틀린에서는 이러한 식을 이용하여 try catch나, if, when 등의 더욱 복잡한 식도 많이 쓰입니다.

```kotlin
fun max(a: Int, b: Int) = if(a > b) a else b
```

또한 이처럼 반환 타입을 생략하여 더욱 간결하게 코드르 작성할 수 있습니다.

코틀린은 동적으로 타입 추론을 통해 값을 컴파일러가 나타내줄 수 있기 때문에
본문 식을 분석해 이와 같은 코드를 작성하는 것이 가능합니다.

> 하지만 여기서 주의해야할 점은 <br>
식이 본문일 때만 타입 추론이 가능하고, 블록이 본문일 때에는 타입을 꼭 지정해줘야 한다는 점을 알아야합나다.

## 2.1.3 변수
자바에서는 변수를 선언할 때 
```java
String a = "java"
```
처럼 타입을 맨 앞에 나타내 주었습니다.
하지만 코틀린에서는 타입 지정을 생략하는 경우가 흔합니다.
타입으로 변수 선언을 시작하면, 식과 변수를 구분하기에 어려움이 있습니다.

따라서 코틀린은 키워드로 변수 선언을 시작하는 대신 변수의 이름 뒤에 타입을 명시하거나 생각하도록 허용합니다.
```kotlin
val question = "삶, 우주, 그리고 모든 것에 대한 궁극적인 질문"
val answer = 42
```

여기서는 생략되었지만 변수의 타입을 지정할 때에는 
```kotlin
val answer: Int = 42와 같이 지정해줄 수 도 있습니다.
```

만약 타입을 지정하지 않았다면 컴파일러가 초기화 식을 분석해서 초기화 식의 변수 타입으로 지정합니다. 여기서 초기화 식은 42로 Int 타입입니다. 그렇기에 변수도 Int가 되는 식으로 생성됩니다.

만약 초기화 식이 없다며누 변수에 저장될 값에 대한 아무런 정보가 없습니다. 따라서 변수타입을 반드시 명시해줘야합니다.
```kotlin
val answer: Int
answer = 42
```

### 변경 가능한 변수와 변경 불가능한 변수
변수 선언 시 사용하는 키워드는 val과 var로 2가지가 있습니다.
* val(value)는 변경 불가능한 참조를 저장하는 변수입니다.
val로 선언된 변수는 일단 초기화하고 나면 재대입이 불가능합니다. 자바로 말하면 final 변수에 해당합니다.
* var(variable)은 변경 가능한 참조입니다. 이런 변수의 값은 계속 변경이 될 수 있습니다. 자바의 일반 변수와 같습니다.

기본적으로는 val 키워드를 사용하되 필요한 경우에만 var로 변경하는 것이 좋습니다.
변경 불가능한 변수와 변경 불가능한 객체를 부수효과 없는 함수와 조합하여 사용하면 코드가 함수형에 가까워집니다.

val은 참조 자체는 불변일지라고 그 참조가 가리키는 객체의 내부 값은 변경될 수 있다는 사실을 알아야합니다. 
```kotlin
val languages = arrayListOf("Java")
languages.add("Kotlin")
```

해당 코드를 보면 val로 지정하였지만 arrayList의 add를 이용하여 처음과는 다른 값으로 변경된 것을 알 수 있습니다.

하지만 var로 지정하더라도 타입은 변경할 수 없습니다.
```kotlin
var answer = 42
answer = "hi"
```
이와 같이 var 키워드를 사용하면 변수의 값을 변경할 수는 있지만,
변수의 타입은 변경되지 않기에 위와 같은 코드에서는 오류가 난다는 사실을 알 수 있습니다.

## 2.1.4 문자열 형식 지정: 문자열 템플릿
코틀린에서 문자열 형식을 지정하는 방식에 대해 알아보겠습니다.
처음 코드로 돌아와서
```kotlin
fun main() {
    println("Hello World!")
}```
처럼 문자열을 프린트 할 수 있습니다.
그렇다면 변수에 있는 값을 출력하려면 어떡해야할까요?

```kotlin
fun main() {
    val name = "leehyeonbin"
    println("Hello $name!")
}
```
이와 같이 $를 이용하여 변수 안의 문자를 사용할 수 있습니다.<br>
자바에서 ("Hello " + name + "!") 과 같은 의미를 내포하고 있습니다.

만약 $를 출력하고 싶을 때는 
```kotlin 
\$
```
를 이용하여 역슬래쉬로 이스케이프 시켜준다면, 화면에 값을 출력하지 않고 출력해줄 수 있습니다.


간단히 변수의 이름으로 한정되지 않는 식의 경우에는 ${}를 이용해 줄 수 있습니다.
```kotlin
fun main() {
    val name = "leehyeonbin"
    println("Hello ${name}")
}
```
위 코드에서는 복잡한 식을 적용하지는 않았지만, 이처럼 ${} 달러와 중괄호를 이용한다면, 원소를 사용할 수 있습니다.
